<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>By Majid — Fine Art Photography</title>
  <meta name="description" content="By Majid — Fine Art Photography portfolio" />
  <meta name="color-scheme" content="dark light">
  <meta name="theme-color" content="#0e0e10">

  <link rel="canonical" href="https://bymajid.com/">
  <meta property="og:title" content="By Majid — Fine Art Photography">
  <meta property="og:description" content="A visual meditation on stillness, space, and the quiet presence of the natural world.">
  <meta property="og:url" content="https://bymajid.com/">
  <meta property="og:type" content="website">
  <meta property="og:image" content="https://bymajid.com/images/social-card.jpg">
  <meta property="og:image:alt" content="Fine art landscape photograph by Majid Mohamadi">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="By Majid — Fine Art Photography">
  <meta name="twitter:description" content="Quiet light. Honest places.">
  <meta name="twitter:image" content="https://bymajid.com/images/social-card.jpg">

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link rel="preload" as="style"
        href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;800&family=Playfair+Display:wght@500;700&display=swap"
        onload="this.onload=null;this.rel='stylesheet'">
  <noscript>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;800&family=Playfair+Display:wght@500;700&display=swap">
  </noscript>

  <style>
    :root { --bg:#0e0e10; --fg:#e9e9ec; --muted:#b6b6bd; --card:#151518; --shadow:0 10px 30px rgba(0,0,0,.35); --radius:18px; --gap:clamp(12px,2vw,20px); --maxw:1200px; --vh:1vh; --headerH:64px }
    @media (prefers-color-scheme: light){ :root{ --bg:#fafafa; --fg:#151518; --muted:#6b6b74; --card:#fff; --shadow:0 10px 30px rgba(0,0,0,.08) }}

    *{box-sizing:border-box}
    html,body{height:100%}
    html{ -webkit-text-size-adjust:100%; text-size-adjust:100% }
    body{ margin:0; background:var(--bg); color:var(--fg); font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,"Apple Color Emoji","Segoe UI Emoji",sans-serif; line-height:1.6; -webkit-tap-highlight-color:transparent }
    a{color:var(--fg); text-decoration:none}
    a:hover{opacity:.9}
    .wrap{max-width:var(--maxw); margin-inline:auto; padding:clamp(16px,4vw,32px)}

    /* Skip link hidden unless focused */
    .skip-link{
      position:fixed; left:8px; top:8px; z-index:10000;
      transform:translateY(-200%); transition:transform .2s ease;
      background:#111; color:#fff; padding:8px 12px; border-radius:8px;
    }
    .skip-link:focus{ transform:none; }

    header{position:sticky; top:0; backdrop-filter:saturate(180%) blur(12px); background:color-mix(in oklab, var(--bg) 90%, transparent); z-index:20; border-bottom:1px solid color-mix(in oklab, var(--fg) 12%, transparent)}
    .nav{display:flex; align-items:center; justify-content:space-between}
    .brand{display:flex; align-items:baseline; gap:10px}
    .brand h1{font-family:"Playfair Display",serif; font-weight:700; letter-spacing:.5px; margin:0; font-size:clamp(18px,2.4vw,26px)}
    .brand small{color:var(--muted); letter-spacing:2px; text-transform:uppercase; font-size:.72rem}
    .links{display:flex; gap:18px}
    .links a{color:var(--muted); font-weight:600; font-size:.92rem}

    .hero{display:grid; grid-template-columns:1.2fr .8fr; gap:var(--gap); align-items:center; padding-block:clamp(28px,6vw,64px)}
    .hero-card{background:var(--card); border-radius:var(--radius); box-shadow:var(--shadow); overflow:hidden; min-height:280px; position:relative}
    .hero-copy{padding:clamp(16px,3vw,28px)}
    .hero-copy h2{font-family:"Playfair Display",serif; font-size:clamp(26px,4vw,46px); margin:0 0 6px}
    .hero-copy p{color:var(--muted); margin:0 0 14px}
    .cta{display:inline-flex; align-items:center; gap:10px; padding:10px 16px; border-radius:999px; background:var(--fg); color:var(--bg); font-weight:700}

    @media (max-width:900px){.hero{grid-template-columns:1fr}}

    /* ===== PORTFOLIO ===== */
    .grid{ display:grid; grid-template-columns:repeat(12,1fr); gap:var(--gap); align-items:start }
    .card{ grid-column:span 6; background:var(--card); border-radius:var(--radius); box-shadow:var(--shadow); overflow:hidden; position:relative; align-self:start }
    .card img{ width:100%; height:auto; display:block }
    .cap{ position:absolute; left:0; right:0; bottom:0; max-width:100%; box-sizing:border-box; padding:12px 14px; background:linear-gradient(180deg, transparent, rgba(0,0,0,.65)); color:#fff; font-size:clamp(11px,2.8vw,15px); line-height:1.3; letter-spacing:.2px; overflow-wrap:anywhere; pointer-events:none }
    .chip{ display:inline-block; padding:.25rem .6rem; border:1px solid color-mix(in oklab, #fff 35%, transparent); border-radius:999px; font-size:.8em; opacity:.9 }

    section[id]{ scroll-margin-top: calc(var(--headerH) + 12px) }

    footer{margin-top:clamp(28px,6vw,64px); padding:24px 0 40px; color:var(--muted); border-top:1px solid color-mix(in oklab, var(--fg) 10%, transparent)}
    .footer-grid{display:flex; flex-wrap:wrap; align-items:center; justify-content:space-between; gap:10px}
    .social a{color:var(--muted)}
    .card img{cursor:zoom-in}
    .card a.zoom{display:block; touch-action:manipulation}

    /* Lightbox + Purchase */
    .lightbox{ position:fixed; inset:0; background:rgba(0,0,0,.95); display:none; align-items:center; justify-content:center; z-index:9999 }
    .lightbox.open{display:flex}
    .lightbox img{ max-width:100vw; max-height:calc(var(--vh) * 100); border-radius:12px; box-shadow:0 20px 60px rgba(0,0,0,.6); display:block }
    .lightbox .close{ position:absolute; top:16px; right:16px; background:rgba(255,255,255,.1); border:1px solid rgba(255,255,255,.3); color:#fff; padding:8px 12px; border-radius:999px; cursor:pointer; font-weight:700 }
    .buy{ position:absolute; left:50%; transform:translateX(-50%); bottom:16px; background:#fff; color:#000; border:none; border-radius:999px; padding:10px 16px; font-weight:800; cursor:pointer; box-shadow:0 10px 30px rgba(0,0,0,.4) }
    body.no-scroll{overflow:hidden}

    /* Shared modal styles (quote + site visit) */
    .modal{ position:fixed; inset:0; display:none; align-items:center; justify-content:center; z-index:10000; background:rgba(0,0,0,.6) }
    .modal.open{display:flex}
    .modal-card{ background:#fff; color:#111; border-radius:14px; width:min(92vw,420px); padding:18px 16px; box-shadow:0 20px 60px rgba(0,0,0,.6); font-size:16px }
    .modal-card h3{ margin:0 0 10px; font-family:"Playfair Display",serif }
    .modal-card label{ display:block; font-size:.9rem; margin:8px 0 4px }
    .modal-card input,.modal-card textarea{ width:100%; border:1px solid #d0d0d4; border-radius:10px; padding:10px 12px; font:inherit }
    .modal-actions{ display:flex; gap:8px; justify-content:flex-end; margin-top:12px }
    .btn{ border:none; border-radius:999px; padding:10px 14px; font-weight:700; cursor:pointer }
    .btn.cancel{ background:#eee; color:#222 }
    .btn.submit{ background:#111; color:#fff }

    .toast{ position:fixed; left:50%; transform:translateX(-50%); bottom:18px; background:#111; color:#fff; padding:10px 14px; border-radius:10px; box-shadow:0 10px 30px rgba(0,0,0,.4); display:none; z-index:10001; font-weight:600 }
    .toast.show{ display:block }
  </style>

  <script type="application/ld+json">
  {
    "@context":"https://schema.org",
    "@type":"Person",
    "name":"Majid Mohamadi",
    "jobTitle":"Fine Art Photographer",
    "url":"https://bymajid.com/",
    "image":"https://bymajid.com/images/about.jpg",
    "sameAs":["https://www.instagram.com/madjidmohamadi"],
    "brand":{"@type":"Brand","name":"By Majid"}
  }
  </script>
</head>
<body>
  <a href="#home" class="skip-link">Skip to content</a>

  <header id="siteHeader">
    <div class="wrap nav">
      <div class="brand">
        <h1>By Majid</h1>
        <small>Fine Art Photography</small>
      </div>
      <nav class="links" aria-label="Primary">
        <a href="#work">Portfolio</a>
        <a href="#about">About</a>
        <a href="#awards">Awards</a>
        <a href="#consult">Consult</a>
        <a href="#contact">Contact</a>
      </nav>
    </div>
  </header>

  <main class="wrap">
    <!-- HERO -->
    <section class="hero" id="home">
      <figure class="hero-card" aria-label="Featured photograph">
        <img src="/images/a-journey-to-the-unknown.png" alt="A Journey to The Unknown"
             width="1600" height="1067" fetchpriority="high" decoding="async" loading="eager"
             sizes="(max-width: 900px) 100vw, 60vw" style="display:block;width:100%;height:auto" />
      </figure>
      <div class="hero-copy">
        <h2>Quiet light. Honest places.</h2>
        <p>A visual meditation on stillness, space, and the quiet presence of the natural world.</p>
        <a class="cta" href="#work">View Portfolio →</a>
      </div>
    </section>

    <!-- PORTFOLIO GRID -->
    <section id="work" aria-label="Portfolio">
      <div class="grid">
        <figure class="card">
          <img src="/images/how-earth-sees-the-leaves.png" alt="How Earth Sees the Leaves" loading="lazy" decoding="async" sizes="(max-width: 900px) 100vw, 50vw" width="1200" height="900">
          <figcaption class="cap"><span class="chip">Space: Gallery</span> How Earth Sees the Leaves</figcaption>
        </figure>

        <figure class="card">
          <img src="/images/golden-breath.png" alt="Golden Breath" loading="lazy" decoding="async" sizes="(max-width: 900px) 100vw, 50vw" width="900" height="1200">
          <figcaption class="cap"><span class="chip">Space: Lobby</span> Golden Breath</figcaption>
        </figure>

        <figure class="card">
          <img src="/images/moonlight-over-the-ocean.png" alt="Moonlight Over The Ocean" loading="lazy" decoding="async" sizes="(max-width: 900px) 100vw, 50vw" width="1200" height="900">
          <figcaption class="cap"><span class="chip">Space: Living room</span> Moonlight Over The Ocean</figcaption>
        </figure>

        <figure class="card">
          <img src="/images/immigrants.png" alt="Immigrants" loading="lazy" decoding="async" sizes="(max-width: 900px) 100vw, 50vw" width="900" height="1200">
          <figcaption class="cap"><span class="chip">Space: Hotel lobby</span> Immigrants</figcaption>
        </figure>

        <figure class="card">
          <img src="/images/whisper-of-form.png" alt="Whisper of Form" loading="lazy" decoding="async" sizes="(max-width: 900px) 100vw, 50vw" width="900" height="1200">
          <figcaption class="cap"><span class="chip">Space: Shop</span> Whisper of Form</figcaption>
        </figure>

        <figure class="card">
          <img src="/images/the-shape-of-wind.png" alt="The Shape of Wind" loading="lazy" decoding="async" sizes="(max-width: 900px) 100vw, 50vw" width="900" height="1200">
          <figcaption class="cap"><span class="chip">Space: Shop</span> The Shape of Wind</figcaption>
        </figure>

        <figure class="card">
          <img src="/images/the-tired-tree.png" alt="The Tired Tree" loading="lazy" decoding="async" sizes="(max-width: 900px) 100vw, 50vw" width="1200" height="900">
          <figcaption class="cap"><span class="chip">Space: Gallery</span> The Tired Tree</figcaption>
        </figure>

        <figure class="card">
          <img src="/images/whispers-of-the-ghost-lake.png" alt="Whispers of the Ghost Lake" loading="lazy" decoding="async" sizes="(max-width: 900px) 100vw, 50vw" width="1000" height="1000">
          <figcaption class="cap"><span class="chip">Space: Living room</span> Whispers of the Ghost Lake</figcaption>
        </figure>

        <figure class="card">
          <img src="/images/story-of-two-benches.png" alt="Story of Two Benches" loading="lazy" decoding="async" sizes="(max-width: 900px) 100vw, 50vw" width="1000" height="1000">
          <figcaption class="cap"><span class="chip">Space: Wellness retreat</span> Story of Two Benches</figcaption>
        </figure>

        <figure class="card">
          <img src="/images/a-journey-to-the-unknown.png" alt="A Journey to The Unknown" loading="lazy" decoding="async" sizes="(max-width: 900px) 100vw, 50vw" width="1200" height="900">
          <figcaption class="cap"><span class="chip">Space: Living room</span> A Journey to The Unknown</figcaption>
        </figure>
      </div>
    </section>

    <!-- ABOUT -->
    <section id="about" style="margin-top: clamp(28px,6vw,64px);">
      <div class="grid" style="grid-template-columns:repeat(12,1fr); gap:var(--gap)">
        <div style="grid-column:span 7; background:var(--card); border-radius:var(--radius); box-shadow:var(--shadow); overflow:hidden">
          <img src="/images/about.jpg" alt="Majid in the field with camera" style="width:100%;height:auto;display:block" loading="lazy" decoding="async" width="1200" height="800">
        </div>
        <div style="grid-column:span 5; display:flex; flex-direction:column; justify-content:center; gap:10px">
          <h3 style="font-family:'Playfair Display',serif; font-size:clamp(20px,3vw,28px); margin:0">About</h3>
          <p style="color:var(--muted); margin:0">Majid Mohamadi is a Canadian–Iranian fine art photographer whose work explores silence, solitude, and the poetry of natural forms. Through minimal compositions and meditative light, he reveals the quiet dialogue between earth, air, and memory. Each image becomes a moment of still reflection — where emptiness speaks, and the unseen finds its voice.</p>
          <p style="color:var(--muted); margin:0">Prints are available in gallery editions. Commissions and licensing by request.</p>
        </div>
      </div>
    </section>

    <!-- AWARDS -->
    <section id="awards" style="margin-top: clamp(28px,6vw,64px);">
      <h3 style="font-family:'Playfair Display',serif; font-size:clamp(20px,3vw,28px); margin:0 0 12px">Awards &amp; Honors</h3>
      <ul style="list-style:none; padding:0; margin:0; display:grid; gap:10px">
        <li style="background:var(--card); border-radius:var(--radius); box-shadow:var(--shadow); padding:14px">
          <strong>Fine Art Photography Awards</strong> — Majid Mohamadi 1st Prize Winner in Travel. <a href="https://fineartphotoawards.com/winners-gallery/fapa-2019-2020/amateur/travel/gold-award/" target="_blank" rel="noopener">View</a>
        </li>
        <li style="background:var(--card); border-radius:var(--radius); box-shadow:var(--shadow); padding:14px">
          <strong>FIAP Honor Ribbon</strong>, 41st Trophy Torretes of Photography (Spain) 2018 — Recognized for excellence in international photography. <a href="https://www.festimatge.org/el-festival-2/" target="_blank" rel="noopener">View</a>
        </li>
        <li style="background:var(--card); border-radius:var(--radius); box-shadow:var(--shadow); padding:14px">
          <strong>LensCulture Art Photography Awards 2022</strong> — Featured and nominated for outstanding work in art photography. <a href="https://www.lensculture.com/photo-competitions/art-photography-awards/2022" target="_blank" rel="noopener">View</a>
        </li>
        <li style="background:var(--card); border-radius:var(--radius); box-shadow:var(--shadow); padding:14px">
          <strong>Kimia Photo Festival (Iran) 2019</strong> — Won first prize for creative photography. <a href="https://www.mehrnews.com/news/4463154/%D8%A7%D8%B9%D9%84%D8%A7%D9%85-%D8%A8%D8%B1%DA%AF%D8%B2%DB%8C%D8%AF%DA%AF%D8%A7%D9%86-%D8%AC%D8%B4%D9%86%D9%88%D8%A7%D8%B1%D9%87-%D8%B9%DA%A9%D8%B3-%D9%85%D8%B9%D8%AF%D9%86-%D9%85%D8%AD%D9%85%D8%AF-%D8%A7%D8%B3%D9%84%D8%A7%D9%85%DB%8C-%D8%B1%D8%A7%D8%AF-%D9%86%D8%B4%D8%A7%D9%86-%DA%A9%DB%8C%D9%85%DB%8C%D8%A7" target="_blank" rel="noopener">View</a>
        </li>
        <li style="background:var(--card); border-radius:var(--radius); box-shadow:var(--shadow); padding:14px">
          <strong>Blank Wall Gallery (Greece)</strong> — Received an honor diploma in 2020 for excellence in fine art photography. <a href="https://www.blankwallgallery.com/majid-mohammedi-iran-untitled/" target="_blank" rel="noopener">View</a>
        </li>
        <li style="background:var(--card); border-radius:var(--radius); box-shadow:var(--shadow); padding:14px">
          <strong>Focus Iran 2 — Craft and Folk Art Museum of Los Angeles (USA)</strong> — Honor diploma for artistic achievements in 2019. <a href="https://farhang.org/programs/focus-iran" target="_blank" rel="noopener">View</a>
        </li>
      </ul>
    </section>

    <!-- INTERIOR CONSULTATION -->
    <section id="consult" style="margin-top: clamp(28px,6vw,64px);">
      <div class="grid" style="align-items:start; gap: var(--gap);">
        <div style="grid-column: span 12; background:var(--card); border-radius:var(--radius); box-shadow:var(--shadow); padding: clamp(16px,3vw,24px)">
          <h3 style="font-family:'Playfair Display',serif; font-size:clamp(20px,3vw,28px); margin:0 0 8px">On-site Consultation</h3>
          <p style="color:var(--muted); margin:0 0 12px">
            Prefer a personal visit? I’ll come to your space, take measurements and reference photos, and prepare
            tailored illustrations with suggested photographs and framing options. There’s <strong>no purchase obligation</strong>;
            a small service fee applies to cover travel and time.
          </p>
          <a href="#" class="cta js-book-visit" style="display:inline-flex; align-items:center; gap:10px; padding:10px 16px; border-radius:999px; background:var(--fg); color:var(--bg); font-weight:700; text-decoration:none;">Book a Site Visit →</a>
          <br><small style="display:block; margin-top:8px; color:var(--muted);">Typical response within 24 hours.</small>
        </div>
      </div>
    </section>

    <!-- CONTACT -->
    <section id="contact" style="margin-top: clamp(28px,6vw,64px);">
      <div class="grid" style="align-items:center">
        <div style="grid-column: span 8; background:var(--card); border-radius:var(--radius); box-shadow:var(--shadow); padding: clamp(16px,3vw,24px)">
          <h3 style="font-family:'Playfair Display',serif; font-size:clamp(20px,3vw,28px); margin-top:0">Contact</h3>
          <p style="color:var(--muted); margin:0 0 12px">For print inquiries, commissions, or exhibitions:</p>
          <p style="margin:0 0 6px"><strong>Email:</strong> <a href="mailto:madjid.mohamadi@gmail.com">madjid.mohamadi@gmail.com</a></p>
          <p style="margin:0 0 6px"><strong>Instagram:</strong> <a href="https://www.instagram.com/madjidmohamadi" target="_blank" rel="noopener">@madjidmohamadi</a></p>
        </div>
        <div style="grid-column: span 4; text-align:center; color:var(--muted)">
          <p style="margin:6px 0 0">© <span id="year"></span> By Majid. All rights reserved.</p>
        </div>
      </div>
    </section>
  </main>

  <footer>
    <div class="wrap footer-grid">
      <div class="social" aria-label="Social links">
        <a href="https://www.instagram.com/madjidmohamadi" aria-label="Instagram" title="Instagram" target="_blank" rel="noopener">Instagram</a>
        <span aria-hidden="true"> · </span>
        <a href="mailto:madjid.mohamadi@gmail.com?subject=Prints%20Inquiry" aria-label="Prints" title="Prints">Prints</a>
      </div>
      <div>Built on GitHub Pages</div>
    </div>
  </footer>

  <!-- Lightbox + purchase -->
  <div class="lightbox" role="dialog" aria-modal="true" aria-labelledby="lb-title">
    <h2 id="lb-title" class="sr-only">Image viewer</h2>
    <button class="close" aria-label="Close">Close ✕</button>
    <img src="" alt="" />
    <button class="buy" type="button" aria-label="Purchase this photo">Purchase this Photo</button>
  </div>

  <!-- Quote dialog -->
  <div class="modal" id="quoteModal" role="dialog" aria-modal="true" aria-labelledby="quote-title" aria-hidden="true">
    <form class="modal-card" id="quoteForm">
      <h3 id="quote-title">Request a Quote</h3>
      <p id="quote-photo" style="margin:.25rem 0 .5rem; font-size:.9rem; color:#444"></p>
      <input type="hidden" name="photo_src" id="photo_src">
      <input type="hidden" name="photo_title" id="photo_title">
      <label for="buyer_email">Your Email</label>
      <input id="buyer_email" name="email" type="email" required placeholder="you@example.com" inputmode="email" autocomplete="email">
      <label for="buyer_note">Notes (optional)</label>
      <textarea id="buyer_note" name="note" rows="4" placeholder="Size, frame preference, delivery city…"></textarea>
      <div class="modal-actions">
        <button type="button" class="btn cancel" id="cancelQuote">Cancel</button>
        <button type="submit" class="btn submit">Submit</button>
      </div>
    </form>
  </div>

  <!-- Site visit dialog (new) -->
  <div class="modal" id="visitModal" role="dialog" aria-modal="true" aria-labelledby="visit-title" aria-hidden="true">
    <form class="modal-card" id="visitForm">
      <h3 id="visit-title">Request a Site Visit</h3>
      <label for="visit_name">Your Name</label>
      <input id="visit_name" name="visit_name" required placeholder="Full Name" autocomplete="name">
      <label for="visit_email">Your Email</label>
      <input id="visit_email" name="visit_email" type="email" required placeholder="you@example.com" inputmode="email" autocomplete="email">
      <label for="visit_phone">Phone (optional)</label>
      <input id="visit_phone" name="visit_phone" type="tel" placeholder="+1 604 …" inputmode="tel" autocomplete="tel">
      <label for="visit_city">City</label>
      <input id="visit_city" name="visit_city" required placeholder="e.g., West Vancouver">
      <label for="visit_date">Preferred Date (optional)</label>
      <input id="visit_date" name="visit_date" type="date">
      <label for="visit_note">Notes (optional)</label>
      <textarea id="visit_note" name="note" rows="4" placeholder="Access, parking, room types, timing…"></textarea>
      <div class="modal-actions">
        <button type="button" class="btn cancel" id="cancelVisit">Cancel</button>
        <button type="submit" class="btn submit">Submit</button>
      </div>
    </form>
  </div>

  <div class="toast" id="toast" role="status" aria-live="polite"></div>

  <script>
    // dynamic --vh for mobile
    function setVh(){ document.documentElement.style.setProperty('--vh', (window.innerHeight * 0.01) + 'px'); }
    setVh(); addEventListener('resize', setVh); addEventListener('orientationchange', setVh);

    // anchor offset
    function setHeaderOffset(){
      const h = document.getElementById('siteHeader');
      const px = h ? (h.offsetHeight || 64) : 64;
      document.documentElement.style.setProperty('--headerH', px + 'px');
    }
    setHeaderOffset(); addEventListener('resize', setHeaderOffset);

    // year
    const y = document.getElementById('year'); if (y) y.textContent = new Date().getFullYear();

    // EmailJS init
    (function(){
      const s = document.createElement('script');
      s.src = 'https://cdn.jsdelivr.net/npm/emailjs-com@3/dist/email.min.js';
      s.onload = function(){ emailjs.init('mK0NVdRoob8JAczNU'); };
      document.head.appendChild(s);
    })();

    // Toast
    const toast = document.getElementById('toast');
    function showToast(msg){
      toast.textContent = msg;
      toast.classList.add('show');
      setTimeout(()=>toast.classList.remove('show'), 3200);
    }

    // Lightbox + Quote
    (function(){
      const lb = document.querySelector('.lightbox');
      if (!lb) return;
      const lbImg = lb.querySelector('img');
      const closeBtn = lb.querySelector('button.close');
      const buyBtn = lb.querySelector('button.buy');
      const main = document.querySelector('main');
      let lastFocus = null;
      let currentPhoto = { src:'', title:'' };

      function openLightbox(src, title){
        lastFocus = document.activeElement;
        document.body.classList.add('no-scroll');
        lb.classList.add('open');
        if (main) main.setAttribute('aria-hidden','true');

        lbImg.alt = title || '';
        currentPhoto = { src, title: title || '' };

        lbImg.src = '';
        const pre = new Image();
        pre.onload = () => { lbImg.src = src; };
        pre.onerror = () => { lbImg.src = src; };
        pre.src = src;

        closeBtn.focus();
      }
      function closeLightbox(){
        lb.classList.remove('open');
        lbImg.src = '';
        document.body.classList.remove('no-scroll');
        if (main) main.removeAttribute('aria-hidden');
        if (lastFocus) lastFocus.focus();
      }

      // Wrap grid images with links to open lightbox
      document.querySelectorAll('.card img').forEach(img => {
        if (!img.parentElement || !img.parentElement.matches('a.zoom')){
          const a = document.createElement('a');
          a.href = img.src;
          a.className = 'zoom';
          a.setAttribute('role','button');
          img.replaceWith(a); a.appendChild(img);
        }
      });
      document.querySelectorAll('.card a.zoom').forEach(a => {
        a.addEventListener('click', (e) => {
          e.preventDefault();
          const img = a.querySelector('img');
          openLightbox(img.src, img.alt || '');
        }, { passive:false });
      });

      closeBtn.addEventListener('click', closeLightbox, { passive:true });
      lb.addEventListener('click', (e)=>{ if(e.target===lb) closeLightbox(); }, { passive:true });
      addEventListener('keydown', (e)=>{ if(e.key==='Escape') closeLightbox(); }, { passive:true });

      // Quote modal hooks
      const quoteModal = document.getElementById('quoteModal');
      const quoteForm  = document.getElementById('quoteForm');
      const cancelQuote = document.getElementById('cancelQuote');
      const photoSrcInput = document.getElementById('photo_src');
      const photoTitleInput = document.getElementById('photo_title');
      const photoLine = document.getElementById('quote-photo');

      function openQuote(){
        photoSrcInput.value = currentPhoto.src;
        photoTitleInput.value = currentPhoto.title;
        photoLine.textContent = currentPhoto.title ? `Photo: “${currentPhoto.title}”` : '';
        quoteModal.classList.add('open');
        quoteModal.setAttribute('aria-hidden','false');
        const emailField = document.getElementById('buyer_email');
        if (emailField) emailField.focus();
      }
      function closeQuote(){
        quoteModal.classList.remove('open');
        quoteModal.setAttribute('aria-hidden','true');
      }

      buyBtn.addEventListener('click', (e)=>{ e.stopPropagation(); openQuote(); }, { passive:false });
      cancelQuote.addEventListener('click', ()=> closeQuote(), { passive:true });
      quoteModal.addEventListener('click', (e)=>{ if(e.target===quoteModal) closeQuote(); }, { passive:true });

      quoteForm.addEventListener('submit', async (e)=>{
        e.preventDefault();
        const fd = new FormData(quoteForm);
        const data = Object.fromEntries(fd.entries());
        const params = {
          subject: 'Quote Request — bymajid.com',
          from_email: data.email,
          reply_to: data.email,
          message: data.note || '',
          photo_title: photoTitleInput.value || '',
          photo_src: photoSrcInput.value || '',
          page_url: location.href,
          user_agent: navigator.userAgent,
          timestamp: new Date().toISOString()
        };
        try{
          await emailjs.send('service_5n0g1j5', 'template_zhuv2cb', params);
          closeQuote();
          closeLightbox();
          showToast('Your quote request has been sent. I will reply with a quote as soon as possible.');
          quoteForm.reset();
        }catch(err){
          showToast('Something went wrong. Please try again.');
        }
      });

      // === Site Visit modal (NEW) ===
      const visitModal = document.getElementById('visitModal');
      const visitForm = document.getElementById('visitForm');
      const cancelVisit = document.getElementById('cancelVisit');

      function openVisit(){
        visitModal.classList.add('open');
        visitModal.setAttribute('aria-hidden','false');
        const f = document.getElementById('visit_name'); if (f) f.focus();
      }
      function closeVisit(){
        visitModal.classList.remove('open');
        visitModal.setAttribute('aria-hidden','true');
      }

      document.querySelectorAll('.js-book-visit').forEach(btn => {
        btn.addEventListener('click', (e)=>{ e.preventDefault(); openVisit(); }, { passive:false });
      });
      cancelVisit.addEventListener('click', ()=> closeVisit(), { passive:true });
      visitModal.addEventListener('click', (e)=>{ if(e.target===visitModal) closeVisit(); }, { passive:true });

      visitForm.addEventListener('submit', async (e)=>{
        e.preventDefault();
        const fd = new FormData(visitForm);
        const v = Object.fromEntries(fd.entries());
        const params = {
          subject: 'Site Visit Request — bymajid.com',
          visit_name: v.visit_name || '',
          visit_email: v.visit_email || '',
          visit_phone: v.visit_phone || '',
          visit_city: v.visit_city || '',
          visit_date: v.visit_date || '',
          message: v.note || '',
          from_email: v.visit_email || '',
          reply_to: v.visit_email || '',
          page_url: location.href,
          user_agent: navigator.userAgent,
          timestamp: new Date().toISOString()
        };
        try{
          await emailjs.send('service_5n0g1j5', 'template_zhuv2cb', params);
          closeVisit();
          showToast('Your site visit request has been sent. I will reply within 24 hours.');
          visitForm.reset();
        }catch(err){
          showToast('Something went wrong. Please try again.');
        }
      });
    })();
  </script>
</body>
</html>
